function calculateScore(questions) {
    var score = 0;

    questions.forEach(function(question, index) {
        // For single-choice questions
        if (question.QuestionType === 1) {
            var userSelectedOptionId = $('input[name="Questions[' + index + '].SelectedOption"]:checked').val();
            // Find the selected option and check if it's correct
            var selectedOption = question.OptionsText.find(option => option.Id.toString() === userSelectedOptionId);
            if (selectedOption && selectedOption.IsCorrect) {
                score++;
            }
        }

        // For multiple-choice questions
        else if (question.QuestionType === 2) {
            var selectedOptionIds = $('input[name="Questions[' + index + '].SelectedOption"]:checked').map(function() {
                return $(this).val();
            }).get();
            // Check each selected option and increment score if correct
            selectedOptionIds.forEach(function(id) {
                var option = question.OptionsText.find(option => option.Id.toString() === id);
                if (option && option.IsCorrect) {
                    score++;
                }
            });
        }
    });

    return score;
}

$('#finishBtn').on('click', function() {
    // Assuming 'questions' is the variable that holds your questions data
    var finalScore = calculateScore(questions);
    alert('Your final score is: ' + finalScore);
});

// You need to fetch 'questions' data from the server and then initialize the quiz
// This can be done through an AJAX call or by embedding the data into the page
// Here's a conceptual example of fetching it through AJAX:

var questions = []; // This will hold the fetched questions data

$(document).ready(function() {
    $.ajax({
        url: '/path/to/your/questions/data', // Update with the correct URL
        type: 'GET',
        success: function(response) {
            questions = response; // Assuming the response is the array of questions
            // Now you can initialize your quiz because 'questions' is populated
        },
        error: function(error) {
            console.error('Error fetching questions:', error);
        }
    });
});
