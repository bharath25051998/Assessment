<style>
    .card-container {
        display: flex;
        flex-wrap: wrap;
    }

    .card {
        border: 1px solid #ccc;
        padding: 10px;
        margin: 5px;
        width: calc(25% - 10px); /* Adjust the width as needed */
        box-sizing: border-box;
        position: relative; /* Add position relative */
        cursor: pointer; /* Add pointer cursor */
    }

    .additional-details {
        display: none;
        padding-top: 10px; /* Adjust spacing between details and arrow icon */
    }

    .arrow-icon {
        position: absolute;
        top: 10px;
        right: 10px;
    }
</style>

<div class="dashboard-container">
    <div class="search-filter">
        <!-- Search filter UI -->
        <input type="text" id="searchInput" placeholder="Search...">
        <!-- Add any other filter options here -->
    </div>

    <div class="card-container">
        @foreach (var group in ViewBag.GroupedData)
        {
            <!-- Line of business (LOB) card -->
            <div class="lob-card card" onclick="toggleDetails(this)">
                <!-- LOB name as card content -->
                <h2>@group.Key</h2>
                
                <!-- Render cards for the specified LOB -->
                @foreach (var item in group)
                {
                    <div class="card">
                        <!-- Card content for the LOB -->
                        <p>AA Number: @item.AANumber</p>
                        <p>SWCU: @item.SWCU</p>
                        <p>Status: @item.Status</p>
                        
                        <!-- Additional details (initially hidden) -->
                        <div class="additional-details" style="display: none;">
                            <p>Additional Details:</p>
                            <!-- Add additional details here -->
                        </div>
                        <!-- Arrow icon indicating expansion state -->
                        <span class="arrow-icon">&#9660;</span>
                    </div>
                }
            </div>
        }
    </div>
</div>

<script>
    function toggleDetails(card) {
        var details = card.querySelector('.additional-details');
        var arrowIcon = card.querySelector('.arrow-icon');

        // Toggle visibility of additional details for the clicked card
        if (details.style.display === 'none') {
            // Show details of the clicked card
            details.style.display = 'block';
            // Change arrow to upwards
            arrowIcon.textContent = '\u25B2';
        } else {
            // Hide details of the clicked card
            details.style.display = 'none';
            // Change arrow to downwards
            arrowIcon.textContent = '\u25BC';
        }

        // Hide details of all other cards
        hideOtherCards(card);
    }
    
    function hideOtherCards(clickedCard) {
        var allCards = document.querySelectorAll('.card');

        // Loop through all cards and hide details of other cards
        allCards.forEach(function(card) {
            if (card !== clickedCard) { // Check if it's not the clicked card
                var details = card.querySelector('.additional-details');
                var arrowIcon = card.querySelector('.arrow-icon');

                // Hide details
                details.style.display = 'none';
                // Change arrow to downwards
                arrowIcon.textContent = '\u25BC';
            }
        });
    }
</script>
