function calculateScore() {
    var score = 0;
    var totalQuestions = model.length; // 'model' is assumed to be an array of question objects

    for (var i = 0; i < totalQuestions; i++) {
        var question = model[i];
        var questionType = question.questionType; // The type of question (1 for single, 2 for multiple choice)
        
        if (questionType === 1) {
            // Single choice question
            var userSelectedOptionId = $('input[name="Questions[' + i + '].SelectedOption"]:checked').val();
            // Find the option with this ID in the question's OptionsText and check if it is correct
            var isCorrect = question.OptionsText.some(option => option.Id == userSelectedOptionId && option.IsCorrect);
            if (isCorrect) {
                score++;
            }
        } else if (questionType === 2) {
            // Multiple choice question
            var selectedOptionIds = $('input[name="Questions[' + i + '].SelectedOption"]:checked').map(function() {
                return $(this).val();
            }).get();
            // Check each selected option ID and count it if it's correct
            selectedOptionIds.forEach(function(id) {
                var isCorrect = question.OptionsText.some(option => option.Id == id && option.IsCorrect);
                if (isCorrect) {
                    score++;
                }
            });
        }
    }
    return score;
}

$('#finishBtn').on('click', function() {
    var finalScore = calculateScore();
    // Do something with the finalScore, such as displaying it or sending it to the server
    alert('Your final score is: ' + finalScore);
});

// Initialize the quiz
$(document).ready(function() {
    // ... rest of your initialization code
});
