@{
    ViewBag.Title = "Index";
}

<h2>Dropdown with Multi-Select</h2>

<select id="multiSelect" multiple="multiple">
    @foreach (var option in ViewBag.Options)
    {
        <option value="@option.Value">@option.Text</option>
    }
</select>

<button id="searchButton" class="btn btn-primary">Search</button>

@section scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.16/js/bootstrap-multiselect.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.16/css/bootstrap-multiselect.css" rel="stylesheet" />

    <script>
        $(document).ready(function () {
            $('#multiSelect').multiselect({
                includeSelectAllOption: true,
                enableFiltering: true
            });

            $('#searchButton').click(function () {
                var selectedValues = $('#multiSelect').val();

                // Perform AJAX call
                $.ajax({
                    url: '@Url.Action("Search", "Home")',
                    type: 'POST',
                    data: { selectedValues: selectedValues },
                    success: function (data) {
                        // Handle success response
                        console.log(data);
                    },
                    error: function (xhr, status, error) {
                        // Handle error response
                        console.error(xhr.responseText);
                    }
                });
            });
        });
    </script>
}
