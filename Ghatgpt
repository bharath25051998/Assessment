$(document).ready(function() {
    var $carousel = $('#moduleCarousel');
    var $nextControl = $('.carousel-control-next');

    // Disable the 'Next' button by default
    $nextControl.prop('disabled', true);

    // Event handler for when a checkbox is changed
    $('.module-complete-checkbox').change(function() {
        // Check if the checkbox is checked
        var isChecked = $(this).is(':checked');

        // Enable the 'Next' button if the checkbox is checked
        $nextControl.prop('disabled', !isChecked);
        
        // If the checkbox is unchecked or the module is already completed (checkbox disabled), keep 'Next' disabled
        if (!isChecked || $(this).is(':disabled')) {
            $nextControl.prop('disabled', true);
        }
    });

    // Event handler for the 'Next' button click
    $nextControl.click(function(e) {
        // Move to the next slide if enabled, otherwise do nothing
        if ($nextControl.is(':disabled')) {
            e.preventDefault();
        } else {
            // Save the completion of the current module before moving to the next slide
            // Make sure to handle the saving process here
        }
    });

    // Initialize carousel to the correct starting index
    // ... (rest of the carousel initialization logic) ...
});
