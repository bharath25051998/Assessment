CREATE PROCEDURE InsertIndividualChapters
    @SourceId INT
AS
BEGIN
    DECLARE @ChapterIds NVARCHAR(MAX);
    
    -- Retrieve the ChapterIds from the SourceTable
    SELECT @ChapterIds = ChapterIds FROM SourceTable WHERE Id = @SourceId;
    
    -- Handle cases where @ChapterIds might be empty
    IF @ChapterIds IS NULL OR @ChapterIds = ''
    BEGIN
        RETURN;
    END

    -- Insert each ChapterId into the TargetTable
    INSERT INTO TargetTable (ChapterId, Timestamp)
    SELECT value AS ChapterId, GETDATE()
    FROM STRING_SPLIT(@ChapterIds, ';')
    WHERE ISNUMERIC(value) = 1;
END
