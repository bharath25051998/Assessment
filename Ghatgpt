# Install Azure CLI
- task: Bash@3
  displayName: 'Install Azure CLI'
  inputs:
    targetType: 'inline'
    script: |
      # Update package lists
      sudo apt-get update
      # Install the latest version of Azure CLI
      sudo apt-get install -y azure-cli

# Create or update Azure Search data source
- task: AzureCLI@2
  inputs:
    azureSubscription: '<Your-Service-Connection-Name>'
    scriptType: 'bash'
    scriptLocation: 'inlineScript'
    inlineScript: |
      az search data-source create \
        --service-name <your-search-service-name> \
        --name <your-datasource-name> \
        --type azureblob \
        --connection-string "<your-storage-account-connection-string>" \
        --identity "<your-uami-resource-id>"
