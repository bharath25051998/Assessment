$(document).ready(function() {
    const kickerTypeDropdown = $('#kickerTypeDropdown');
    const priceFields = $('#priceFields');
    const addKickerBtn = $('#addKickerBtn');
    const saveBtn = $('#saveBtn');

    // When a kicker type is selected, show the price input field
    kickerTypeDropdown.on('change', function() {
        const selectedKickerType = $(this).val();
        priceFields.html(`<input type="text" id="${selectedKickerType}" placeholder="Enter price for ${selectedKickerType}">`);
    });

    // Add new kicker type input field
    addKickerBtn.on('click', function() {
        const newKickerType = $('<input type="text" class="newKickerType" placeholder="Enter new kicker type">');
        priceFields.append(newKickerType);
    });

    // Save the entered prices
    saveBtn.on('click', function() {
        let prices = [];

        // Retrieve prices for existing kicker types
        $('input[type="text"]').each(function() {
            const kickerType = $(this).attr('id');
            const price = $(this).val();
            if (price) {
                prices.push(`${kickerType}:${price}`);
            }
        });

        // Retrieve prices for newly added kicker types
        $('.newKickerType').each(function() {
            const newKickerType = $(this).val();
            const price = $(`#${newKickerType}`).val();
            if (price) {
                prices.push(`${newKickerType}:${price}`);
            }
        });

        // Send prices to the server to save
        $.ajax({
            url: '/api/savePrices',
            method: 'POST',
            contentType: 'application/json',
            data: JSON.stringify(prices),
            success: function(data) {
                console.log('Prices saved successfully:', data);
                // Refresh UI or perform any other actions as needed
            },
            error: function(error) {
                console.error('Error saving prices:', error);
            }
        });
    });
});
